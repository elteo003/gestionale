@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   DESIGN SYSTEM - Base Styles
   ============================================ */

@layer base {
  /* Typography */
  body {
    @apply font-sans text-base text-neutral-900 dark:text-neutral-100 bg-white dark:bg-neutral-900 antialiased;
  }

  h1 {
    @apply text-4xl font-bold text-neutral-900 dark:text-neutral-100;
  }

  h2 {
    @apply text-3xl font-semibold text-neutral-900 dark:text-neutral-100;
  }

  h3 {
    @apply text-2xl font-semibold text-neutral-900 dark:text-neutral-100;
  }

  h4 {
    @apply text-xl font-semibold text-neutral-900 dark:text-neutral-100;
  }

  h5 {
    @apply text-lg font-semibold text-neutral-900 dark:text-neutral-100;
  }

  h6 {
    @apply text-base font-semibold text-neutral-900 dark:text-neutral-100;
  }

  /* Links */
  a {
    @apply text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors duration-200;
  }

  /* Focus visible - optimized for dark mode */
  *:focus-visible {
    @apply outline-none ring-2 ring-primary-500 dark:ring-primary-400 ring-offset-2 dark:ring-offset-neutral-800;
  }

  /* Selective transitions for theme-aware elements */
  body,
  h1, h2, h3, h4, h5, h6,
  button,
  input,
  select,
  textarea,
  [class*="bg-"],
  [class*="text-"],
  [class*="border-"] {
    @apply transition-colors duration-200 ease-in-out;
  }

  /* Scrollbar styling - full dark mode support */
  ::-webkit-scrollbar {
    @apply w-2 h-2;
  }

  ::-webkit-scrollbar-track {
    @apply bg-neutral-100 dark:bg-neutral-800;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-neutral-300 dark:bg-neutral-600 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-neutral-400 dark:bg-neutral-500;
  }

  /* Firefox scrollbar - using Tailwind colors */
  * {
    scrollbar-width: thin;
    scrollbar-color: rgb(209 213 219) rgb(243 244 246); /* neutral-300 neutral-100 */
  }

  .dark * {
    scrollbar-color: rgb(75 85 99) rgb(31 41 55); /* neutral-600 neutral-800 */
  }
}

/* ============================================
   Dark Mode Support
   ============================================ */

@layer base {
  /* Color scheme for dark mode */
  .dark {
    color-scheme: dark;
  }

  /* Prevent flash of unstyled content */
  html {
    @apply bg-white dark:bg-neutral-900;
  }

  /* Fallback per tema iniziale basato su media query (previene FOUC) */
  @media (prefers-color-scheme: dark) {
    html:not(.light):not([data-theme]) {
      color-scheme: dark;
    }
  }
}

/* ============================================
   Animations
   ============================================ */

@keyframes wave {
  0% {
    transform: translateX(-100%);
  }
  50% {
    transform: translateX(100%);
  }
  100% {
    transform: translateX(-100%);
  }
}

.animate-wave {
  animation: wave 1.5s ease-in-out infinite;
}

/* ============================================
   Utility Classes
   ============================================ */

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .text-pretty {
    text-wrap: pretty;
  }
}
